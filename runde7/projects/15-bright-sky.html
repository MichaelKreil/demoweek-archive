<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bright Sky</title>
  <link rel="icon" href="https://archive.demoweek.prototypefund.de/runde7/assets/images/favicon.svg" sizes="any" type="image/svg+xml">
  <link rel="stylesheet" href="https://archive.demoweek.prototypefund.de/runde7/assets/css/main.css">

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  
  <meta name="twitter:image" content="https://archive.demoweek.prototypefund.de/assets/images/project_images/Bright_Sky/header.png">
  <meta name="twitter:title" content="Bright Sky">
  <meta name="twitter:description"
    content="Im öffentlichen Auftrag generiert und veröffentlicht der Deutsche Wetterdienst Wetteraufzeichnungen und -vorhersagen für Deutschland und Europa. Bright Sky ist eine öffentliche und entgeltfreie API, die versucht diese Daten maximal einfach nutzbar zu machen.">
  <meta name="twitter:site" content="@prototypefund">
  <!-- Open Graph -->
  <meta property="og:locale" content="de_DE">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Bright Sky">
  <meta property="og:description"
    content="Im öffentlichen Auftrag generiert und veröffentlicht der Deutsche Wetterdienst Wetteraufzeichnungen und -vorhersagen für Deutschland und Europa. Bright Sky ist eine öffentliche und entgeltfreie API, die versucht diese Daten maximal einfach nutzbar zu machen.">
  <meta property="og:url" content="https://archive.demoweek.prototypefund.de/projects/15-bright-sky.html">
  <meta property="og:site_name" content="Prototype Fund Demo Week 2020">
</head>

<body >
  <header>
  <div class="header-container">
    <div class="fix-header">
      <div class="flex-container justify-between align-center">
        <a href="https://prototypefund.de/" style="text-decoration: none;" target="_blank" rel="nofollow noreferrer">
          <div class="logo">
            <svg width="45" height="64" viewBox="0 0 45 55" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M29.5806 3.47559L35.3199 4.17959L42.1081 16.9396L35.3199 27.6609C35.3199 27.6609 27.5726 29.6409 24.6056 30.3449H17.8473V47.6222L23.3169 49.5143L23.182 51.3623L13.4567 51.2302L3.70149 51.3623L3.4917 49.5143L8.9912 47.6222V7.17159L3.50668 5.32359L3.71647 3.47559H29.5806ZM17.8623 26.6636L23.5117 27.7196L32.233 21.7649L34.9303 16.9396L32.233 12.0849L23.5117 6.45292L17.8623 7.18625V26.6636Z"
                fill="#009ACE" />
            </svg>
            <div class="logo-animation">
              <div>Demo</div>
              <div>Week</div>
            </div>
          </div>
        </a>

        <nav>
  <div class="nav-container hidden-xs">
    <ul>
      <li class="nav-links">
        <a href="https://archive.demoweek.prototypefund.de/runde7/#keynote1">Eröffnung</a>
      </li>
      <li class="nav-links">
        <a href="https://archive.demoweek.prototypefund.de/runde7/#project-section">Projekte</a>
      </li>
      <li class="nav-links">
        <a href="https://archive.demoweek.prototypefund.de/runde7/#keynote2">Abschluss</a>
      </li>
    </ul>
  </div>
  <div class="nav-xs-container">
    <input type="checkbox" class="checkbox" hidden id="click">
    <label class="nav-hamburger" for="click"><img
        src="https://archive.demoweek.prototypefund.de/runde7/assets/images/hamburger.png" /></label>
    <ul class="navs">
      <li class="nav-links">
        <a href="https://archive.demoweek.prototypefund.de/runde7/#keynote1">Eröffnung</a>
      </li>
      <li class="nav-links">
        <a href="https://archive.demoweek.prototypefund.de/runde7/#project-section">Projekte</a>
      </li>
      <li class="nav-links">
        <a href="https://archive.demoweek.prototypefund.de/runde7/#keynote2">Abschluss</a>
      </li>
    </ul>
  </div>
</nav>
      </div>
    </div>
  </div>
</header>
  <div class="project-container container">
  <a href="https://archive.demoweek.prototypefund.de/runde7/" class="home-link">
    <div class="flex-container justify-start align-center">
      <img src="https://archive.demoweek.prototypefund.de/runde7/assets/images/back.png" />
      <p>Zurück zur Startseite</p>
    </div>
  </a>
  <div class="flex-container project justify-between">
    <div class="project-details">
      <div class="project-authors">
        
        <a >
          Jakob de Maeyer
        </a>
        
      </div>
      <h2 class="project-title">Bright Sky</h2>
      <p class="project-brief">
        Wir machen Wetterdaten zugänglicher.
      </p>
      
      <p class="project-description">
        Im öffentlichen Auftrag generiert und veröffentlicht der Deutsche Wetterdienst Wetteraufzeichnungen und -vorhersagen für Deutschland und Europa. Bright Sky ist eine öffentliche und entgeltfreie API, die versucht diese Daten maximal einfach nutzbar zu machen.
      </p>
      
    </div>
    <div class="project-image">
      
      <img src="https://archive.demoweek.prototypefund.de/runde7/assets/images/project_images/Bright_Sky/header.png" />
      
    </div>
  </div>
  <div class="project-body">
    <h1 id="bright-sky---zur-nutzbarmachung-öffentlicher-wetterdaten">Bright Sky - zur Nutzbarmachung öffentlicher Wetterdaten</h1>

<p>Wetter ist allgegenwärtig – es beeinflusst, welche Kleidung wir morgens aus dem Schrank ziehen, welches Tempolimit auf dynamisch geregelten Autobahnabschnitten gilt und wie leicht Viren übertragen werden. Wetteraufzeichnungen liefern die Datengrundlage für Fragen zu vielen wissenschaftlichen, wirtschaftlichen und zivilen Themen: von Freibaderlösen über Erntevorhersagen bis zum Klimawandel. Wegen dieser Relevanz für das öffentliche Leben finanziert die Bundesrepublik Deutschland für <a href="https://www.dwd.de/SharedDocs/downloads/DE/allgemein/zahlen_und_fakten.pdf">fast 400 Millionen Euro im Jahr</a> den Deutschen Wetterdienst (DWD), welcher eine Vielzahl wetter- und klimabezogener Dienste anbietet. Neben der Bereitstellung von Wetterwarnungen und der Erstellung von Wettervorhersagen gehört dazu auch der Betrieb von knapp 200 hauptamtlichen Wetterstationen in Deutschland sowie das Sammeln von weiteren Aufzeichnungen von etwa 1800 ehrenamtlich betreuten Wetterstationen.</p>

<p><img src="/runde7/assets/images/project_images/Bright_Sky/dwd_station-opt.jpg" alt="Meteorologisches Observatorium des DWD in Hohenpeissenberg" />
<em>Meteorologisches Observatorium des DWD in Hohenpeissenberg. Quelle: DWD</em></p>

<p>Eine 2017 in Kraft getretene umfangreiche Reform des Gesetzes über den Deutschen Wetterdienst berechtigte den DWD – endlich und gegen großen Aufschrei privater Wetterdienstleister – seine öffentlich finanzierten Aufzeichnungen und andere Leistungen entgeltfrei der Öffentlichkeit bereitzustellen. Seitdem wurde das Angebot an Wetterdaten auf dem <a href="https://www.dwd.de/DE/leistungen/opendata/opendata.html">DWD Open Data Server</a> kontinuiertlich verbessert und erweitert.</p>

<h2 id="der-kampf-zwischen-aufzeichnung-und-auswertung">Der Kampf zwischen Aufzeichnung und Auswertung</h2>

<p>Doch das Format, in dem Wetteraufzeichnungen gespeichert – und veröffentlicht – werden, ist naturgemäß bestimmt durch die Art, wie diese erhoben werden: als Zeitreihen einzelner Messinstrumente. So findet sich auf dem Open-Data-Server beispielsweise eine <a href="https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/hourly/precipitation/historical/stundenwerte_RR_01766_19950901_20191231_hist.zip">einzelne Datei</a> mit allen Niederschlagsaufzeichnungen der Station 1766 (Münster/Osnabrück) von 1995 bis 2019. Dem gegenüber sind typische Nutzer*innen von Wetterdaten – z. B. der Betreiber einer Wetterapp, oder die Wissenschaftlerin, welche Ernteausfälle untersucht – weder an den Details des DWD-Stationsnetzes (<em>welche Station liegt wo?, welche Station misst welche Parameter?</em>) noch an lediglich einzelnen Messinstrumenten interessiert; ihre Frage hat die Form „wie waren (oder <em>werden</em>) Temperatur, Niederschlag, Wind und Wolkendichte an den Koordinaten XY zum Zeitpunkt Z?“</p>

<p><a href="/runde7/assets/images/project_images/Bright_Sky/dwd_vs_darksky.png"><img src="/runde7/assets/images/project_images/Bright_Sky/dwd_vs_darksky.png" alt="Datenstruktur der DWD-Rohdaten vs. Datenstruktur des kommerziellen Anbieters Dark Sky" /></a>
<em>Datenstruktur der DWD-Rohdaten vs. Datenstruktur des kommerziellen Anbieters Dark Sky.</em></p>

<p>Zur Nutzung der DWD-Aufzeichnungen ist daher ein erheblicher Programmieraufwand – zur Zusammenführung der vielen verschiedenen Wetterparameter und zum Parsing der Vielzahl unterschiedlicher Datenformate auf dem DWD-Server – notwendig. Die Konsequenz ist häufig die Aufgabe des Vorhabens oder das Ausweichen auf kommerzielle Anbieter, welche Wetterdaten im gewünschten Format bereitstellen. Ziel von <a href="https://brightsky.dev/">Bright Sky</a> ist es, diesen Spalt zwischen Format der DWD-Daten und Nutzer*innenansprüchen zu überbrücken und auf Basis der öffentlichen Wetteraufzeichnungen eine kostenfreie Schnittstelle bereitzustellen, welche in der Einfachheit ihrer Nutzung den kommerziellen Anbietern ebenbürtig ist.</p>

<h2 id="auftritt-bright-sky">Auftritt: Bright Sky</h2>

<p>Die Aufbereitung der DWD-Wetterdaten lässt sich in zwei große Teile aufteilen:</p>

<ul>
  <li>Einlesen, Verarbeiten und Zusammenführen der Rohdaten vom DWD Open Data Server in eine eigene Datenbankstruktur und</li>
  <li>Bereitstellen der zusammengeführten Daten durch eine leicht zu bedienende Schnittstelle.</li>
</ul>

<p>Der DWD veröffentlicht seine Wetter- und Klimadaten über einen <a href="https://opendata.dwd.de/">simplen Dateiserver</a>. Dort werden historische Wetteraufzeichnungen einmal täglich, Zusammenfassungen der aktuellen Wetterlage und Wettervorhersagen stündlich bzw. für <a href="https://de.wikipedia.org/wiki/SYNOP">SYNOP-Meldungen</a> im Abstand von wenigen Minuten aktualisiert. Bright Sky’s Polling-Komponente überprüft minütlich anhand des Dateiindexes, ob neue bzw. geänderte Rohdaten vorliegen. Aktualisierte Dateien werden aus ihren diversen CSV-, XML- und binären Formaten geparsed, in ein konsistentes Einheitensystem übertragen und schließlich anhand ihrer Quelle und des Messzeitpunkts in einer PostgreSQL-Datenbank zusammengeführt. Die meisten Wetterdaten des DWD sind so typischerweise innerhalb von fünf Minuten nach ihrer Veröffentlichung auch in Bright Sky verfügbar.</p>

<p>Die mit aufbereiteten Wetterdaten befüllte Datenbank ist der Kern von Bright Sky. Sie entspricht einer (unvollständigen) alternativ organisierten Repräsentation der Daten auf dem DWD-Server: nicht sortiert als Messreihen einzelner Geräte, sondern als Zeitreihen der Gesamtwetterlage an den Wetterstationen, aus der sich schnell einzelne Station-Zeitpunkt-Kombinationen auswählen lassen.</p>

<p><a href="/runde7/assets/images/project_images/Bright_Sky/architecture.svg"><img src="/runde7/assets/images/project_images/Bright_Sky/architecture.svg" alt="Bright Sky's Architektur" /></a>
<em>Bright Sky’s Architektur.</em></p>

<p>Als „Tor zur Welt“ für die Wetterdaten aus der Datenbank dient eine API. Diese nimmt die drei für die meisten Nutzer*innen bequemsten Parameter <em>Breitengrad</em>, <em>Längengrad</em>, <em>Zeitpunkt</em> entgegen, wählt die passendste Station aus dem DWD-Messnetz (bzw. den passendsten Vorhersageort) und gibt die entsprechenden Wetteraufzeichnungen (bzw. -vorhersagen) im gängigen JSON-Format zurück. Dabei geschieht im Hintergrund auch die Zusammenführung von Daten aus mehreren Quellen, bspw. falls der angefragte Zeitraum sowohl die Vergangenheit als auch die Zukunft umfasst oder falls die nächstgelegene Station nicht alle Wetterparameter veröffentlicht. Dank der beeindruckenden Leistung von PostgreSQL sind <a href="https://grafana.api.brightsky.dev/">die meisten Anfragen in weniger als 30 Millisekunden bearbeitet</a>.</p>

<h2 id="bright-sky-ist-keine-wetterapp">Bright Sky ist keine Wetterapp!</h2>

<p>Die Kernfunktion von Bright Sky ist das Bereitstellen von historischen Wetteraufzeichnungen, von Daten zur aktuellen Wetterlage und von Wettervorhersagen in einem <em>maschinell lesbaren</em> Format. Dies hilft überall dort, wo Wetterdaten maschinell verarbeitet werden, z. B. für wissenschaftliche Auswertungen, in der Heimautomatisierung, in Frühwarnsystemen oder aber auch als Daten<em>quelle</em> für Wetterapps von Drittanbietern. Diese Programme können die öffentliche, kostenfreie Bright Sky-Schnittstelle nutzen, um auf Wetterdaten des Deutschen Wetterdienstes zuzugreifen. Wie simpel die Nutzung funktioniert und wie Bright Sky als Datenquelle in eine hypothetische Wetterapp eingebunden werden könnte, zeigt unsere <a href="https://brightsky.dev/demo/">Online-Demo</a>!</p>

<p><a href="https://brightsky.dev/demo/"><img src="/runde7/assets/images/project_images/Bright_Sky/brightsky-demo.png" alt="Bright Sky Online-Demo" /></a></p>

<p>Bright Sky ins Leben rufen zu dürfen, war in vielerlei Hinsicht ein sehr dankbares Unterfangen: Schon in den ersten Wochen nach dem Freischalten der Alpha-Version – obwohl kaum beworben – erreichten uns E-Mails vom DWD und von Nutzer*innen aus Deutschland und sogar den Amerikas (das MOSMIX-Modell des DWD enthält weltweite Wettervorhersagen) mit viel hilfreichenem Feedback und warmen Worten. Bereits nach drei Wochen durfte Bright Sky seine erste Feuerprobe erfahren. Nachdem bis dahin nur etwa 100 – 200 Anfragen je Tag eingegangen waren, gab es an einem Freitagabend Anfang Juli gleich 30.000 Anfragen innerhalb einer Stunde; wie sich im Nachhinein herausstellte für eine wissenschaftliche Auswertung. Dank der über 30 Jahre an Schweiß und Blut, die in die quelloffene PostgreSQL-Datenbank geflossen sind, ließ sich auch dieser Ansturm mit dem VPS, auf dem Bright Sky für weniger als 10 Euro im Monat <a href="https://github.com/jdemaeyer/brightsky-infrastructure">gehostet wird</a>, bewältigen. Seitdem ist das Grundlevel an API-Anfragen stetig angestiegen und liegt derzeit bei <a href="https://grafana.api.brightsky.dev/">etwa 10.000 Anfragen pro Tag</a>.</p>

<p>Schon jetzt lässt sich Bright Sky für viele Anwendungen als freie Alternative zu den kommerziellen Anbietern verwenden. Der große Datenschatz des DWD bietet aber noch viel weiteres Potential: von großflächigen Wetterkarten über Wetterwarnungen bis zu hochaufgelösten (minütlichen) Niederschlagshistorien. Als eingefleischte Open-Source-Fans hoffen wir, einige von diesen in den nächsten Monaten und Jahren zusammen mit der Community in Features für Bright Sky gießen zu können.</p>

<p><em>Die Entwicklung von Bright Sky wird durch die unschätzbare Betreuung durch das <a href="https://prototypefund.de/">Prototype-Fund</a>-Programm der <a href="https://www.okfn.de/">Open Knowledge Foundation</a> und des <a href="https://www.dlr.de/pt/">DLR Projektträger</a> unterstützt und ist großzügig vom <a href="https://www.bmbf.de/">Bundesministerium für Bildung und Forschung</a> finanziert. So offensichtlich es auch sein mag: Nichts hiervon wäre möglich ohne die gewissenhafte und nie endende Arbeit des <a href="https://www.dwd.de/">Deutscher Wetterdienstes</a>.</em></p>

  </div>
</div>
  <footer>
  <div class="flex-container separator-container justify-between align-center">
    <div class="blue-label separator-banner">
      <div>Demo</div>
      <div>Week</div>
    </div>
    <div class="pink-label separator-banner">
      <div>Demo</div>
      <div>Week</div>
    </div>
    <div class="blue-label separator-banner">
      <div>Demo</div>
      <div>Week</div>
    </div>
    <div class="pink-label separator-banner">
      <div>Demo</div>
      <div>Week</div>
    </div>
    <div class="blue-label separator-banner">
      <div>Demo</div>
      <div>Week</div>
    </div>
    <div class="pink-label separator-banner">
      <div>Demo</div>
      <div>Week</div>
    </div>
  </div>
  <div class="footer-container">
    <div class="flex-container justify-between footer-details">
      <div class="footer-desc">
        <p>
          Der Prototype Fund ist ein Projekt der Open Knowledge Foundation Deutschland e. V.,
          das vom Bundesministerium für Bildung und Forschung (BMBF) gefördert wird.
        </p>
        <div class="flex-container justify-start align-center">
          <img src="https://archive.demoweek.prototypefund.de/runde7/assets/images/footer_logo.svg" />
          <img src="https://archive.demoweek.prototypefund.de/runde7/assets/images/logo-okfn.png" style="margin-left: 5rem;" />
        </div>
      </div>
      <div class="social-container">
        <p>join the conversation<br />#prototypefund</p>
        <div class="social-links">
          <p>follow us:</p>
          <div class="flex-container justify-end">
            <a href="https://twitter.com/prototypefund" target="_blank" rel="nofollow noreferrer"><img
                src="https://archive.demoweek.prototypefund.de/runde7/assets/images/social_icons/twitter.png" /></a>
            <a href="https://mastodon.social/@PrototypeFund" target="_blank" rel="nofollow noreferrer"><img
                src="https://archive.demoweek.prototypefund.de/runde7/assets/images/social_icons/mastodon.png" /></a>
          </div>
        </div>
        <div class="links-container">
          <a class="link" href="https://prototypefund.de/code-of-conduct/" target="_blank"
            rel="nofollow noreferrer">Code of Conduct</a>
          <a class="link" href="https://prototypefund.de/impressum/" target="_blank" rel="nofollow noreferrer">Impressum
            / Datenschutz</a>
        </div>
      </div>
    </div>
  </div>
</footer>
</body>

</html>
